\documentclass[11pt, a4paper]{article}
\usepackage[left=25mm, right=25mm, top=20mm, bottom=20mm, includefoot]{geometry}
\usepackage{setspace}
\usepackage{titlesec}
\usepackage{graphicx}
\usepackage[english]{babel}
\usepackage[autostyle]{csquotes}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{array}
\usepackage[toc, title, page]{appendix}
\usepackage{pdfpages}
\usepackage[style=apa, backend=biber, language=english]{biblatex}
\PassOptionsToPackage{hyphens}{url}\usepackage{hyperref}

\addbibresource{sources.bib}
\setlength{\parindent}{0ex}
\setlength{\parskip}{1.5ex}
\font\titlefont=cmr10 at 18pt
\MakeOuterQuote{"}

\titleformat{\chapter}[display]
  {\normalfont\huge\bfseries\flushleft\hyphenpenalty=10000}{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{0pt}{40pt}

\lstset{
  frame=tb, % draw a frame at the top and bottom of the code block
  tabsize=4, % tab space width
  showstringspaces=false, % don't mark spaces in strings
  numbers=left, % display line numbers on the left
  basicstyle=\linespread{0.85}\selectfont,
  breaklines=true,
  postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
  commentstyle=\color{olive}, % comment color
  keywordstyle=\color{blue}, % keyword color
  stringstyle=\color{red} % string color
}

\linespread{1.5}
\begin{document}

\title{\titlefont 4D Geometry rendering assignment}
\author{Ashley Smith}
\date{\today}
\maketitle
\thispagestyle{empty}

% Abstract goes here if desired

\cleardoublepage
\setcounter{page}{1}
\pagenumbering{roman}
\tableofcontents

\cleardoublepage
\pagenumbering{arabic}
\setcounter{page}{1}

\section{Background description (10\%)}

For this assignment, I have chosen to learn about and investigate the fourth dimension with respect to graphics. Most games are typically set in a two or three dimensional world and the fourth dimension is rarely discussed as part of a game's core design, if discussed at all. I aim to create an interactive visualisation of four-dimensional geometry in an effort to educate both myself and others how the fourth dimension may be applicable to graphics used in video games or other media outlets.

\subsection{2D to 3D: Why do dimensions matter?}

A game's graphics, character controls, world concepts and designs and even a game's genre are affected by the number of dimensions a game has -- this can be seen in \citeauthor*{riskofrain}' Risk of Rain \parencite*{riskofrain} and its sequel Risk of Rain 2 \parencite{riskofrain2}. In two-dimensional games, characters are generally confined to two axes and are therefore considered to be top-down or side-on; Risk of Rain is a platformer and makes use of a side-on perspective. Because of this, enemies line up and then stack on top of each other to attack the player, who's only choices of evasion are to run away or jump over the enemies. Risk of Rain 2 however is 3D, meaning that the enemies attempt to surround the player and the player can escape in multiple directions while also retaining their option to try and jump over enemies.

\emph{TODO: RISK OF RAIN IMAGE HERE}

It could be said that the transition to 3D was good for Risk of Rain \parencite*{riskofrain}, however, there are many features in the first game that couldn't be brought into the game. Some player abilities that shot in straight lines to hit multiple enemies wouldn't be as effective if the enemies weren't lined up or stacked on top of one another; ladders and other platforming elements that took advantage of the space on a player's screen would look awkward and cramped in an otherwise-spacious 3D environment, meaning that the player is mainly stuck running around on the ground; and finally, while the player can see more things in front of them without the constraint of one's monitor size, enemies can easily spawn or wander behind the player and perform surprise (or sometimes \emph{unfair}) attacks and ending the player's game. Despite these shortcomings, Risk of Rain 2 \parencite*{riskofrain2} is considered a well-received improvement to the original \parencite{riskofrain2steamreviews}.

\subsection{3D to 4D: What will be achieved from this project?}

If the third dimension can create new opportunities and conceptualise new gameplay and new mechanics, it does make one wonder about the possibilities that the fourth dimension may bring to gaming. With virtual reality and other technologies becoming more accessible and accepted as avenues of entertainment, the fourth dimension may not seem so experimental. In this project, I wrote my own 4D geometry viewer in an effort to lessen the gap between the third and fourth dimensions. While this project doesn't feature anything new, it is hoped that the development of this project is just as insightful and interesting as the end result and that the approaches used to build the application will be of use to future developers wanting to pioneer the fourth dimension.

Video games are just as much about the feel of the world as they are about the look --- being able to perceive the world from different positions and angles and interact with it in various ways both contribute to how well a world has been crafted. I feel that this project benefits from user interaction in a similar way and will help users understand the fourth dimension better. 

Instead of just displaying a 4D object, I wanted to allow the user to be in control of how the object is looked at and how it is transformed. These interactions are made with both keyboard shortcuts and an interactive menu. Users can move and rotate the camera to examine the 4D object, while a menu can be used to apply various translations, rotations and scales to the object. The combination of each of these transformations can be seen in a 5x5 matrix and their effects are applied to the 4D object and therefore forming the connection between how an object is transformed and how it appears --- something which may be confusing in the context of the fourth dimension.

\subsection{4D to 2D: The challenges of visualising 4D}

Visualising the fourth dimension in simulations and games isn't simple. 2D games can be seen as simplified 3D worlds, especially when art and rendering techniques are used to try and mimic the 3D world as seen in classic arcade games like After Burner \parencite{afterburner}. Humans are three-dimensional beings and as such we feel familiar with worlds that appear to be 3D even when looking at them through a two-dimensional display. When a 3D game is rendered, matrix mathematics is employed to translate coordinates in world space to screen space and therefore render a 3D world onto the screen. 4D objects and worlds are incomprehensible to beings who can only perceive the third dimension, meaning that there is always going to be a sense of esoterism when working with anything beyond three dimensions. Moreover, 4D geometry needs to be translated into 2D geometry in order to be rendered on screen, creating an additional barrier to visualisation.

Firstly, in order to see a 4D object, a 4D object needs to be created. The tesseract is a 4D hypercube and is suitable as the main polytope for this project. For this project, I want to perform projections and other transformations using GPU shaders like you would for an ordinary game. This is in contrast to the approach \citeauthor*{hollasch1991four} \parencite*{hollasch1991four} and many other article writers chose; they transform the vertices in C++ and then give those to the GPU instead. Secondly, in order to view the fourth dimension, a 4D camera can be used to view the fourth dimension from various positions and angles. Next, a projection matrix is used to project vertices into the third dimension, where it is then perceived by a separate, 3D camera and then finally projected to 2D for rendering on screen. Getting all of these steps correct is difficult as they cannot be worked on independently and tested easily --- it is the sum of these steps that achieve even the simplest result. 

\section{Standout elements (10\%)}

My largest achievement with this project was that I actually managed to render a tesseract, a 4D hypercube. Given a set of 4D vertices and a list of indices, any poly in the 4th dimension and below can be rendered in this project. Changing the 3D and 4D cameras alter the perspective of the shape which is handled by the GPU as it would be in a normal video game. This was extremely difficult at first because of homogenous coordinates.

OpenGL interprets coordinates to be homogenous when rendering \parencite{woo1999opengl} meaning that a vector $v = (5, 4, 3, 2)$ is divided by it's final component $w$ such that $v' = (\frac{5}{2}, \frac{4}{2}, \frac{3}{2}, \frac{2}{2})$. Figure \ref{fig:homogenous} illustrates how the 4th component of a 4D vector is used to scale vertices to give the deceiving appearance of a tesseract when it is actually just two inter-connected cubes with a difference in scaling. Overcoming this required a deep investigation of the 4D to 3D projection matrix and why it wasn't eliminating the 4th component of vertex coordinates.

\begin{figure}[!h]
  \centering
  %\includegraphics[width=\textwidth]{img/24-02-20/centered_4D_cube.png}
  \emph{TODO: Homogoenous image here}
  \caption{Homogenous coordinates creating the appearance of a tesseract}
  \label{fig:homogenous}
\end{figure}

Another feature I'm proud of is the summary window. For each polytope there is a set of information that describes the number of vertices, edges, faces and cells of not only the 4D shape but also each variant of the same polytope such as a line, a square and a cube --- while this information is trivial, being able to compare the geometry between each shape does help create an understanding of what a higher dimension means. Furthermore, clicking the name of each shape scales the rendered polytope such that a cube would get flattened into a square, for instance. I hope that small details like this inspire interest in the user to learn more about the relationships between dimensions.

END

- Describe standout elements (things considered important or critical, areas I'm proudest of, areas I struggled but then succeeded with)
- Provide detail as to why they were important or how they relate to deliverable
- Provide details, insight and rationale about the above

\section{Design (30\%)}

- Describe how the deliverable works in detail
- Use appropriate and recognised notations and abstraction mechanisms
- Clear and detailed evidence of the use of software engineering principles (software architecture)
- Detail the graphical techniques or concepts employed and how they were implemented
- Describe any algorithms that relate to deliverable

\section{Implementation (10\%)}

- Describe the process and approach of development along with any milestones
- Comment on what happen in each step, what was overcome and what was learnt
- Describe what steps would be useful in future projects and which ones wouldn't

\cleardoublepage
\printbibliography[
  heading=bibintoc,
  title={Bibliography}
]

\cleardoublepage
\begin{appendices}

\section{Something}

It's an appendix

\end{appendices}

\end{document}
